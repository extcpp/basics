#!/bin/bash

lib=$project_root/.build_scripts/build_lib
if [[ -f "$lib" ]]; then
    . "$lib"
else
    echo "${build_prefix}unable to source build_lib"
    exit 1
fi

if [[ -n "$RPATH" ]]; then
    flags="-Wl,-rpath,$RPATH"
    export CXXFLAGS="$flags"
    export CCLAGS="$flags"
fi

#prepare
section "running cmake"
cd $build_root || ferr "failed to change into build dir"
#command
echo "cmake arguments: $@"
cmake "$@" "$project_root" || fserr "running cmake - failed" $?

#end
echo
